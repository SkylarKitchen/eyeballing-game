"use strict";(()=>{var S={1:{cssProperty:"-webkit-text-stroke-width",min:1,max:10},2:{cssProperty:"font-variation-settings",min:25,max:152},3:{cssProperty:"font-variation-settings",min:100,max:900},4:{cssProperty:"border-radius",min:0,max:32},5:{cssProperty:"opacity",min:0,max:100},6:{cssProperty:"box-shadow",min:0,max:30},7:{cssProperty:"box-shadow",min:0,max:360}},p=10,k=20,q=2,B=1;var s={SUCCESS:"is-success",ERROR:"is-error",ACTIVE:"is-active",SHAKE:"shake-element"};function $(t,e){t-=90,t<0&&(t+=360);let r=t*(Math.PI/180),o=Math.floor(e*Math.cos(r)),n=Math.floor(e*Math.sin(r));return{offsetX:o,offsetY:n}}function f(t){let e=Math.floor(t/60),r=t%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function G(t){let e=Math.floor(t/60),r=t%60,o=e===1?"minute":"minutes",n=r===1?"second":"seconds";return e===0?`${r} ${n}`:`${e} ${o} and ${r} ${n}`}var L=class{constructor(e,r){this.startTime=e;this.timeElement=r;this.countup=0;this.eventCallbacks={};this.timeElapsed=this.startTime,this.timeElement.textContent=f(this.timeElapsed)}on(e,r){this.eventCallbacks[e]||(this.eventCallbacks[e]=[]),this.eventCallbacks[e].push(r)}emit(e){this.eventCallbacks[e]&&this.eventCallbacks[e].forEach(r=>r())}start(){this.countup=setInterval(()=>{this.timeElapsed+=1,this.timeElement.textContent=f(this.timeElapsed)},1e3)}stop(){clearInterval(this.countup)}reset(){this.stop(),this.timeElapsed=this.startTime,this.timeElement.textContent=f(this.timeElapsed)}getTime(){return this.timeElapsed}getAccurateTime(){return(this.timeElapsed+performance.now()%1e3/1e3).toFixed(2)}};var g=class{constructor(e,r,o,n,c,h,x,C,A,U,Q,Z,ee=!1){this.levelNumber=e,this.targetValue=r,this.userSelection=o,this.displayUserSelectionElement=n,this.referenceEl=c,this.targetElProperty=h,this.min=x,this.max=C,this.targetEl=A,this.userSelectEl=U,this.messageEl=Q,this.score=Z,this.isCircular=ee,this.updateGameUI()}play(){this.referenceEl.style.setProperty(this.targetElProperty,this.formatPropertyValueToStringForLevel(this.levelNumber,this.targetValue)),this.userSelectEl.addEventListener("input",e=>{this.userSelection=parseInt(e.target.value),this.updateGameUI()})}updateGameUI(){this.displayUserSelectionElement.textContent=`${this.userSelection}`,this.targetEl.style.setProperty(this.targetElProperty,this.formatPropertyValueToStringForLevel(this.levelNumber,this.userSelection))}checkAnswer(){let e,r;if(this.isCircular)e=Math.abs(this.targetValue-this.userSelection),e=Math.min(e,360-e),r=e/360*100;else{e=Math.abs(this.targetValue-this.userSelection);let o=this.max-this.min;r=e/o*100}return console.log(`target: ${this.targetValue} user: ${this.userSelection}`),console.log(`difference: ${e} percentage: ${r}`),r<=p}getRandomInt(e,r){return Math.floor(Math.random()*(r-e+1))+e}setTargetValue(e,r){this.targetValue=this.getRandomInt(e,r)}formatPropertyValueToStringForLevel(e,r){if(e===1)return`${r}px`;if(e===2)return`"wdth" ${r}`;if(e===3)return`"wght" ${r}`;if(e===4)return`${r}px`;if(e===5)return`${r}%`;if(e===6){let n=getComputedStyle(this.referenceEl).boxShadow.split(" ");return n[4]=`${r}px`,n.join(" ")}if(e===7){let n=getComputedStyle(this.referenceEl).boxShadow.split(" "),c=parseInt(n[4],10),h=parseInt(n[5],10),x=Math.sqrt(c*c+h*h),{offsetX:C,offsetY:A}=$(r,x);return n[4]=`${C}px`,n[5]=`${A}px`,n.join(" ")}return""}};var M=class{constructor(e){this.scoreElement=e;this.currentScore=0;this.scoreElement.textContent=this.currentScore.toString()}updateScore(e,r,o=!1){let n=this.calculateScore(e,r,o);return this.currentScore+=n,this.scoreElement.textContent=this.currentScore.toString(),n}calculateScore(e,r,o=!1){let n,c;return o?(n=Math.abs(e-r),n=Math.min(n,360-n),c=n/360*100):(n=Math.abs(e-r),c=n/e*100),c<=p?q:c<=k?B:0}reset(){this.currentScore=0,this.scoreElement.textContent=this.currentScore.toString()}getScore(){return this.currentScore}};var{fetch:re}=window;var ne=document.querySelectorAll('[data-game="reference-el"]'),oe=document.querySelectorAll('[data-game="target-el"]'),se=document.querySelectorAll('[data-game="display-user-selection"]'),y=document.querySelectorAll('[data-game="user-select-el"]'),w=document.querySelectorAll('[data-game="submit-button"]'),P=document.querySelectorAll('[data-game="next-button"]'),a=document.querySelector('[data-game="message-el"]'),I=document.querySelectorAll(".w-tab-link"),H=document.querySelector('[data-game="time-remaining"]'),Y=document.querySelector('[data-game="score"]'),d=document.querySelector('[data-game="round-number"]'),F=document.querySelector('[data-game="start-game"]'),E=document.querySelector('[data-game="countdown"]'),R=document.querySelector('[data-game="intro"]'),T=document.querySelector('[data-game="game"]'),_=document.querySelector('[data-game="end"]'),O=document.querySelector('[data-game="end-text"]'),W=document.querySelector('[data-game="try-again"]'),l=document.querySelector('[data-game="glow-top-embed"]'),N=document.querySelector('[data-game="penalty-overlay"]'),b=document.querySelector('[data-game="game-window"]'),K=document.querySelector('[data-game="name"]'),X=document.querySelector('[data-game="email"]');if(!K||!X)throw new Error("Error retrieving name or email elements.");var i=1,u=[],ae=Object.keys(S).length;if(!Y||!d||!a||!H||!E||!R||!T||!_||!O||!W||!F||!l||!N||!b)throw new Error("Error retrieving necessary game elements.");var v=new M(Y),m=new L(0,H);d.textContent=i.toString().padStart(2,"0");J();function j(){u.length=0;for(let t=1;t<=ae;t++){if(!a||!H)throw new Error("Message and timer elements are required");let e=new g(t,de(parseInt(y[t-1].min,10),parseInt(y[t-1].max,10)),parseInt(y[t-1].value,10),se[t-1],ne[t-1],S[t].cssProperty,S[t].min,S[t].max,oe[t-1],y[t-1],a,v,t===7);u.push(e)}}function ie(){if(!R||!T||!E)throw new Error("Intro and game elements are required");if(!E)throw new Error("Countdown element is required");R.style.setProperty("display","none"),T.style.setProperty("display","block"),j(),m.start(),u[i-1].play();let t=setInterval(()=>{let e=parseInt(E.textContent||"3",10);e===1?(clearInterval(t),D(I[i]),m.start(),u[i-1].play()):E.textContent=(e-1).toString()},1e3)}function ce(){if(!d||!E||!v||!m)throw new Error("Error resetting the game");E.textContent="3",v.reset(),m.reset(),i=1,D(I[0]),d.textContent=i.toString().padStart(2,"0"),j()}function z(){if(m.stop(),!T||!_||!O)throw new Error("Game and end elements are required");let t=G(m.getTime());O.textContent=`Congratulations! You finished the game in ${t}.`,T.style.setProperty("display","none"),_.style.setProperty("display","block"),re("https://hooks.zapier.com/hooks/catch/14554026/3my5lpi/",{method:"POST",body:JSON.stringify({time:m.getAccurateTime(),name:K.value,email:X.value})}).then(e=>e.json()).then(e=>console.log("Success:",e)).catch(e=>console.error("Error:",e))}function le(t){if(!(!a||!l||!N||!b))if(t)l.classList.add(s.SUCCESS),a.classList.add(s.SUCCESS),a.textContent="Congratulations! You nailed it",ue();else{let e=(5e3-1)/1e3;a.textContent=`Incorrect! Try again in ${Math.round(e)} ${e===1?"second":"seconds"}.`,N.classList.add(s.ACTIVE),l.classList.add(s.ERROR),a.classList.add(s.ERROR),b.classList.add(s.SHAKE),setTimeout(()=>{b.classList.remove(s.SHAKE)},500);let r=setInterval(()=>{a.textContent=`Incorrect! Try again in ${Math.round(e)} ${e===1?"second":"seconds"}.`,e-=1},1e3);setTimeout(()=>{clearInterval(r),N.classList.remove(s.ACTIVE),l.classList.remove(s.ERROR),a.classList.remove(s.ERROR)},5e3)}}F.addEventListener("click",()=>{ie()});document.addEventListener("keydown",t=>{t.key==="q"&&z()});w.forEach(t=>{t.addEventListener("click",Ee)});P.forEach(t=>{t.addEventListener("click",me)});W.addEventListener("click",()=>{ce(),_.style.setProperty("display","none"),R.style.setProperty("display","block")});function Ee(){if(!a||!l)return;let t=u[i-1].checkAnswer();le(t)}function me(){if(!d)throw new Error("Round element is required");!l||!a||(i+=1,l.classList.remove(s.SUCCESS),a.classList.remove(s.SUCCESS),i<=u.length?(d.textContent=i.toString().padStart(2,"0"),D(I[i]),u[i-1].play(),J()):z())}function ue(){w.forEach(t=>{t.style.setProperty("display","none")}),P.forEach(t=>{t.style.setProperty("display","block")})}function J(){w.forEach(t=>{t.style.setProperty("display","block")}),P.forEach(t=>{t.style.setProperty("display","none")})}function de(t,e){return Math.floor(Math.random()*(e-t+1))+t}function D(t){let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});t.dispatchEvent(e)}})();
